syntax = "proto3";
package hostserve.v1;
option go_package = "github.com/bmj2728/HostServiceTest/shared/protogen/hostserve/v1;hostservev1";

// HostService is a service provided by the host process and is generally preferred over granting direct
// access to the plugin process
service HostService {
  //FS Endpoints

  rpc ReadDir(ReadDirRequest) returns (ReadDirResponse);
  rpc ReadFile(ReadFileRequest) returns (ReadFileResponse);
  rpc WriteFile(WriteFileRequest) returns (WriteFileResponse);

  //Env Endpoints

  rpc GetEnv(GetEnvRequest) returns (GetEnvResponse);
}

// Type Definitions

// DirEntry represents the basic dir entry data
message DirEntry {
  string name = 1;
  bool is_dir = 2;
}

// FS Messages

message ReadDirRequest {
  string path = 1;
}

message ReadDirResponse {
  repeated DirEntry entries = 1;
  optional string error = 2;
}

message ReadFileRequest {
  string dir = 1;
  string file = 2;
}

message ReadFileResponse {
  bytes contents = 1;
  optional string error = 2;
}

message WriteFileRequest {
  string dir = 1;
  string file = 2;
  bytes data = 3;
  uint32 perm = 4;
}

message WriteFileResponse {
  optional string error = 1;
}

// Env Service Messages

message GetEnvRequest {
  string key = 1;
}

message GetEnvResponse {
  string val = 1;
}
